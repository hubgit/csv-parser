<link rel="import" href="../polymer/polymer.html">

<script src="lib/CSVParser.js"></script>

<polymer-element name="csv-parser" attributes="csv data">
  <template>
    <style>:host { display: none; }</style>
  </template>

  <script>
  Polymer('csv-parser', {
    csv: '',
    delimiter: '"',
    data: null,
    setup: function() {
      this.parser = new CSVParser({ delimiter: this.delimiter });
    },
    ready: function() {
      this.setup();
      this.rows = [];
    },
    delimiterChanged: function() {
      this.setup();
    },
    csvChanged: function() {
      this.result = this.parser.parse(this.csv);
      this.rows = this.result.results.rows;
    }
  });
  </script>
</polymer-element>